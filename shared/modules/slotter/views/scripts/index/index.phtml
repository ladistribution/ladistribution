<h2>Applications</h2>

<?php $this->instancesList() ?>

<?php if ($this->canAdmin) : ?>

<div style="width:100%;overflow:hidden">

    <div style="float:left;padding-right:25px;margin-right:25px;border-right:1px dotted #ccc">
        <h2><?php echo $this->translate->translate("Manage") ?></h2>
        <?php
        $pages = array(
            array('controller' => 'users', 'label' => "Users"),
            array('controller' => 'repositories', 'label' => "Repositories"),
            array('controller' => 'databases', 'label' => "Databases"),
            array('controller' => 'locales', 'label' => "Locales"),
            array('controller' => 'settings', 'label' => "Global settings")
        );
        ?>
        <ul>
            <?php foreach ($pages as $page) :
                $label = $this->translate($page['label']);
                $url = $this->url(array('controller' => $page['controller'], 'action' => 'index'));
            ?>
            <li><a href="<?php echo $url ?>"><?php echo $label ?></a></li>
            <?php endforeach ?>
        </ul>
    </div>

    <div style="float:left">
        <h2><?php echo $this->translate("Updates") ?></h2>
        <?php if ($this->canAdmin && $this->hasUpdate) :
            $updateUrl = $this->url(array('controller' => 'index', 'action' => 'update'), 'update');
            $updateString = $this->translate(
                "There is some updates available. It's recommended to <a href=\"%s\">upgrade now.</a>");
            ?>
            <p><?php printf($updateString, $updateUrl); ?></p>
        <?php else: ?>
            <p><?php echo $this->translate("Everything fine, nothing to update.") ?></p>
        <?php endif ?>
    </div>

</div>

<?php endif ?>

<?php if (empty($this->users) || count($this->users) == 0) : $this->canAdmin = true; ?>

    <p><strong>Warning:</strong> You don't have any user registered yet. Registering users is necessary to password protect this admin and install others applications.</p>

<?php endif ?>

<?php if (empty($this->databases) || count($this->databases) == 0) : ?>

    <p><strong>Notice:</strong> You didn't registered any database connection yet. A database is often needed to deploy new web application.</p>

<?php endif ?>
